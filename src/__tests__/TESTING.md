# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è —Ç–µ—Å—Ç–æ–≤

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

–î–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤ —Ç—Ä–µ–±—É—é—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è. –û–Ω–∏ **–Ω–µ –¥–æ–ª–∂–Ω—ã —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤ –∫–æ–¥–µ**!

## –®–∞–≥ 1: –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env.test`

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env.test` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏:

```
# –¢–µ—Å—Ç–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
NODE_ENV=test
LOG_LEVEL=ERROR
LOG_TO_CONSOLE=false

# –¢–µ—Å—Ç–æ–≤—ã–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è Basic Auth
API_USERNAME=–≤–∞—à_—Ç–µ—Å—Ç–æ–≤—ã–π_–ª–æ–≥–∏–Ω
API_PASSWORD=–≤–∞—à_—Ç–µ—Å—Ç–æ–≤—ã–π_–ø–∞—Ä–æ–ª—å

# –¢–µ—Å—Ç–æ–≤—ã–π API –∫–ª—é—á
API_KEY_CS_CART=–≤–∞—à_—Ç–µ—Å—Ç–æ–≤—ã–π_api_–∫–ª—é—á

# –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è Supabase
SUPABASE_URL=https://supabase.uroven.pro
SUPABASE_ANON_KEY=–≤–∞—à_—Ç–µ—Å—Ç–æ–≤—ã–π_–∫–ª—é—á_supabase
```

## –®–∞–≥ 2: –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª `.env.test` –¥–æ–±–∞–≤–ª–µ–Ω –≤ `.gitignore` —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –µ–≥–æ —Å–ª—É—á–∞–π–Ω–æ–≥–æ –∫–æ–º–º–∏—Ç–∞.

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã:

```bash
npm test
```

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Ç–µ—Å—Ç–æ–≤, `setup.ts` –∑–∞–≥—Ä—É–∂–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ `.env.test`
2. –ï—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–±—ã—á–Ω—ã–π `.env`
3. –¢–µ—Å—Ç—ã –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Ö—Ä–∞–Ω—è—Ç —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –∫–æ–¥–µ
4. –ö–∞–∂–¥—ã–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–≤–æ–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º Supabase

```bash
RUN_INTEGRATION_TESTS=true npm test
```


src/__tests__/
‚îú‚îÄ‚îÄ setup.ts               # üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∏ + –º–æ–∫–∏
‚îú‚îÄ‚îÄ unit/                   # üß™ –¢–µ—Å—Ç—ã –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ middleware.test.ts  # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ services.test.ts    # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îú‚îÄ‚îÄ api/                    # üåê –¢–µ—Å—Ç—ã –≤—Å–µ–≥–æ API
‚îÇ   ‚îú‚îÄ‚îÄ calculation.test.ts # –†–∞—Å—á–µ—Ç –¥–æ—Å—Ç–∞–≤–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ zone.test.ts        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–æ–Ω
‚îú‚îÄ‚îÄ integration/            # üöÄ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ (—Ä–µ–∞–ª—å–Ω—ã–π Supabase)
‚îÇ   ‚îî‚îÄ‚îÄ supabase.integration.test.ts
‚îî‚îÄ‚îÄ mocks/                  # üé≠ –ü–æ–¥–¥–µ–ª–∫–∏ —Å–µ—Ä–≤–∏—Å–æ–≤
    ‚îî‚îÄ‚îÄ services.ts